<!DOCTYPE html>
<html lang="ar" file.type, lastModified: Date.now() }));
                            }
                        }, file.type, quality); dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="
                    };
                    img.onerror = () => resolve(file); // Fail gracefully
                };
                readerviewport" content="width=device-width, initial-scale=1.0, maximum-scale=1..onerror = () => resolve(file); // Fail gracefully
            });
        }

        function removeLoader()0, user-scalable=no">
    <title>Wolf TraVal | Ù„Ù„Ø³ÙŠØ§Ø­Ø© ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡</ {
            const loader = document.getElementById('loader');
            if (loader && !loader.classList.containstitle>

    <meta name="theme-color" content="#0f172a">
    <('loader-hidden')) {
                loader.classList.add('loader-hidden');
                setTimeout(() => loaderlink rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href.remove(), 500);
            }
        }

        const firebaseConfig = {
          apiKey="https://img.icons8.com/fluency/512/Wolf.png">
    <: "AIzaSyCTo8DhvaAmNtV9OIgY5eLOeVgF7ilink rel="icon" type="image/png" href="https://img.icons8.com/fluencyQqlYk",
          authDomain: "faculty-of-commerce-2025.firebaseapp/512/airplane-take-off.png">

    <!-- Performance Optimizations -->
    <link.com",
          databaseURL: "https://faculty-of-commerce-2025-default- rel="preconnect" href="https://res.cloudinary.com">
    <link rel="preconnect" href="rtdb.europe-west1.firebasedatabase.app",
          projectId: "faculty-of-commerce-2025",
          storageBucket: "faculty-of-commerce-2025https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    <meta property="og:title" content="Wolf TraVal | Ù„Ù„Ø³ÙŠØ§Ø­Ø© ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡.firebasestorage.app",
          messagingSenderId: "312259778">
    <meta property="og:description" content="Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø§Øª Ùˆ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø³ÙŠØ§835",
          appId: "1:312259778835Ø­Ø© ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡ ÙˆØ§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ© ÙÙŠ Ù…ØµØ±.">
    <meta property="og:image" content:web:504299bb2de918596b62e6",="https://raw.githubusercontent.com/shehabt1000-boop/-/8feac6
          measurementId: "G-QJZB7E2D5R"
        };
        const2d11c707c07fd2d22afba278c69 tripsPath = `artifacts/${firebaseConfig.projectId}/public/data/trips`; 
        const bannerPath070d152/Wolf%20TraVal%20.jpg">
    <meta = `artifacts/${firebaseConfig.projectId}/public/data/banner`; 

        window.showNotification = function property="og:url" content="https://Wolf-traval.netlify.app/">
    <meta property(msg, type) {
            const notif = document.createElement('div');
            notif.className="og:type" content="website">
    <script src="https://cdn.tailwindcss.com"></script = `notification-toast fixed top-10 left-1/2 -translate-x-1/2 px>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@-6 py-3 rounded-xl text-white shadow-2xl transition-all duration-500 opacity300;400;600;700;900&display=swap"-0 transform translate-y-[-20px] ${type === 'error' ? 'bg-red- rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/600/95' : type === 'success' ? 'bg-green-600/95'libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Styles : 'bg-gray-700/95'} backdrop-blur-md border border-white/10 font-bold text-sm text-center w-[90%] max-w-sm`;
            notif.innerHTML -->
    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        body::-webkit-scrollbar, html::-webkit-scrollbar { display: none; }
        /* Hide scrollbar for IE, Edge and Firefox = msg;
            document.body.appendChild(notif);
            setTimeout(() => { notif.classList.remove('opacity-0', 'translate-y-[-20px]'); }, 50);
             */
        body, html { -ms-overflow-style: none; scrollbar-width: none; }setTimeout(() => { notif.classList.add('opacity-0', 'translate-y-[-20px
        
        body { font-family: 'Cairo', sans-serif; background-color: #000; overflow-x: hidden; }

        .glass-nav { 
            background: rgba(0]'); setTimeout(() => notif.remove(), 500); }, 3000);
        }, 0, 0, 0.7); 
            backdrop-filter: blur(12px

        async function uploadToCloudinary(file) {
            try {
                const fileToUpload = await compressImage(file);
                const formData = new FormData();
                formData.append('file', fileToUpload);    
            border-bottom: 1px solid rgba(255, 255, );
                formData.append('upload_preset', UPLOAD_PRESET);
                
                const response =255, 0.05); 
            z-index: 50; 
             await fetch(CLOUDINARY_URL, { method: 'POST', body: formData });
                if (!height: 60px; 
        }

        #loader {
            position: fixed; inset: 0; z-index: 9999;
            background-color: #0f17response.ok) throw new Error("Upload Failed");
                const data = await response.json();
                return data2a; 
            display: flex; flex-direction: column; align-items: center; justify-.secure_url; 
            } catch (error) { 
                console.error(error); content: center;
            transition: opacity 0.5s ease-out, visibility 0.5s
                throw new Error("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ù†ØªØ±Ù†Øª"); 
            }
        }

        function isVideo;
        }
        .loader-hidden { opacity: 0; visibility: hidden; }

        /*(url) {
            return url.match(/\.(mp4|webm|ogg|mov)$/i) Notification High Z-Index */
        .notification-toast { z-index: 100000 !important || url.includes('/video/upload/');
        }

        function checkDeepLink() {
            if (; }

        /* Mobile Menu & Overlay */
        .mobile-menu-overlay {
            position: fixeddeepLinkHandled) return;
            const urlParams = new URLSearchParams(window.location.search);
; inset: 0; background: rgba(0,0,0,0.6); z-index:            const tripId = urlParams.get('tripId');
            if (tripId) {
                const 40;
            opacity: 0; visibility: hidden; transition: 0.3s; backdrop element = document.getElementById(`trip-${tripId}`);
                if (element) {
                    setTimeout(() => {-filter: blur(4px);
        }
        .mobile-menu-overlay.active { opacity:
                        element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        element.classList 1; visibility: visible; }
        
        .mobile-menu { 
            transition: transform .add('highlight-card');
                        setTimeout(() => element.classList.remove('highlight-card'), 50.3s cubic-bezier(0.4, 0, 0.2, 1); 000);
                    }, 500);
                    deepLinkHandled = true;
                }
            transform: translateX(-100%); 
            left: 0; right: auto; 

            }
        }

        function checkAllLoaded() {
            if (isTripsLoaded && is            will-change: transform;
            top: 60px !important;
        }
        .mobile-BannerLoaded) {
                checkDeepLink();
                removeLoader();
                initVideoObserver(); 
            }
        }

        function initVideoObserver() {
            const observer = new IntersectionObserver((entries) =>menu.open { transform: translateX(0); }

        /* Utility for Modal Internal Scrolling */
        .no-scrollbar::- {
                entries.forEach(entry => {
                    if (!entry.isIntersecting) {
                        constwebkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none video = entry.target;
                        if (!video.paused) {
                            video.pause();
                        }; scrollbar-width: none; }

        input[type="file"]::file-selector-button {
                    }
                });
            }, { threshold: 0.5 }); 

            document.querySelectorAll(' margin-left: 0.5rem; background-color: #0d9488; color:video').forEach(video => {
                observer.observe(video);
            });
        }

        async white; border: 0; border-radius: 0.5rem; padding: 0.25 function initApp() {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(apprem 0.75rem; cursor: pointer; }
        .ltr { direction: ltr; }

);
            auth = getAuth(app);

            onAuthStateChanged(auth, (user) => {
        .marquee-wrapper { overflow: hidden; width: 100%; position: relative; }
                        if (user && user.uid === ADMIN_UID) {
                    isAdmin = true;
                    updateUI.marquee-content { display: flex; width: max-content; animation: scrollLeft 45s linearForAdmin(true);
                    showNotification("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…", "success");
                } infinite; transform: translateZ(0); backface-visibility: hidden; }
        .marquee-wrapper: else {
                    isAdmin = false;
                    updateUIForAdmin(false);
                    if (!user) signInhover .marquee-content { animation-play-state: paused; }
        @keyframes scrollLeft { 0Anonymously(auth).catch(e => console.log(e));
                }
                listenForTri% { transform: translateX(0); } 100% { transform: translateX(50%); } }ps();
                listenForBanner();
            });

            document.getElementById('companyName').textContent = COMPANY_

        /* Lightbox */
        .lightbox { position: fixed; inset: 0; z-index:NAME;
            document.getElementById('footerCompanyName').textContent = COMPANY_NAME;
            document.querySelectorAll('.fb 2000; background: rgba(0,0,0,0.95); display: flex-link').forEach(l => l.href = FB_PAGE);
            document.querySelectorAll('.wa-link; align-items: center; justify-content: center; opacity: 0; pointer-events: none;').forEach(l => l.href = `https://wa.me/${DEFAULT_PHONE}`);
        }

 transition: opacity 0.3s; }
        .lightbox.active { opacity: 1; pointer-        window.openLightbox = function(src) {
            const lb = document.getElementById('mainLightbox');
events: all; }
        .lightbox img, .lightbox video { max-width: 95%; max            const container = document.getElementById('lightboxContent');
            container.innerHTML = ''; 
            const optimizedSrc-height: 80vh; border-radius: 8px; box-shadow: 0 0 = getOptimizedUrl(src, 1200); 
            if (isVideo(src)) { 20px rgba(0,0,0,0.5); }
        .lightbox-close {
                container.innerHTML = `<video src="${optimizedSrc}" controls autoplay class="max-w-full max- position: absolute; top: 20px; right: 20px; background: rgba(25h-[80vh] rounded-lg"></video>`;
            } else {
                container.innerHTML = `<5,255,255,0.2); color: white; width: 40pximg src="${optimizedSrc}" class="max-w-full max-h-[80vh] rounded-lg; height: 40px; border-radius: 50%; display: flex; align-items:">`;
            }
            lb.classList.add('active');
        }
        window.closeLightbox center; justify-content: center; cursor: pointer; font-size: 20px; transition: background = function() {
            document.getElementById('mainLightbox').classList.remove('active');
            document.getElementById 0.3s; z-index: 2001; }
        .lightbox-close:('lightboxContent').innerHTML = ''; 
        }

        window.changeSlide = function(btn, direction)hover { background: rgba(255,0,0,0.6); }

        .slide- {
            const card = btn.closest('.trip-card-image-container');
            const mediaItems =media { transition: opacity 0.5s ease-in-out; }
        
        @keyframes glow card.querySelectorAll('.slide-media');
            const counter = card.querySelector('.slide-counter');
            letBox {
            0% { box-shadow: 0 0 0 0 rgba(13, activeIndex = Array.from(mediaItems).findIndex(el => !el.classList.contains('opacity-0 148, 136, 0.7); border-color: #0d94'));

            mediaItems[activeIndex].classList.add('opacity-0');
            mediaItems[activeIndex].style88; }
            70% { box-shadow: 0 0 0 10px.pointerEvents = 'none';
            if(mediaItems[activeIndex].tagName === 'VIDEO') mediaItems[ rgba(13, 148, 136, 0); border-color: #0activeIndex].pause();

            let nextIndex = activeIndex + direction;
            if (nextIndex >= mediaItemsd9488; }
            100% { box-shadow: 0 0 0.length) nextIndex = 0;
            if (nextIndex < 0) nextIndex = mediaItems 0 rgba(13, 148, 136, 0); border-color:.length - 1;

            mediaItems[nextIndex].classList.remove('opacity-0');
             #374151; }
        }
        .highlight-card { animation: glowBox mediaItems[nextIndex].style.pointerEvents = 'auto'; 
            
            if(counter) counter2s ease-out infinite; border: 2px solid #0d9488 !important; }.textContent = `${nextIndex + 1}/${mediaItems.length}`;
        }

        window.toggleDesc
        .line-clamp-2 { overflow: hidden; display: -webkit-box; -webkit-box = function(id) {
            const descEl = document.getElementById(`desc-${id}`);
            const btn-orient: vertical; -webkit-line-clamp: 2; }
        .line-clamp-noneEl = document.getElementById(`btn-desc-${id}`);
            if (descEl.classList.contains('line { -webkit-line-clamp: unset; }
    </style>

    <!-- Firebase & Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
        import { getFirestore,-clamp-2')) {
                descEl.classList.remove('line-clamp-2');
                descEl.classList.add('line-clamp-none');
                btnEl.textContent = 'Ø¹Ø±Ø¶ Ø£Ù‚Ù„';
            } else {
                descEl.classList.add('line-clamp-2');
                descEl. collection, addDoc, query, orderBy, Timestamp, onSnapshot, setDoc, doc, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";
        import { getAuth, signInAnonymously, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";

        const COMPANY_NAME = "Wolf TraVal";
        const ADMIN_UID = "GOMXxizbZEPRztWWzigk8CZNpvf2"; 
        constclassList.remove('line-clamp-none');
                btnEl.textContent = 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯';
            }
        }

        function renderTrips(trips) {
            const container = document.getElementById('trips-container');
            container.innerHTML = ''; 

            if (trips.length === 0) {
                container.innerHTML = `<div class="col-span-full flex flex-col items-center justify-center py-16 text-center opacity-80"><i class="fas fa-suitcase-rolling text-5xl text-teal-500 mb-4"></i><h3 class="text-2xl DEFAULT_PHONE = "201055416692"; 
        const FB_ font-bold text-gray-200">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø­Ù„Ø§Øª</h3></div>`;
                return;
PAGE = "https://www.facebook.com/share/17nGeQC6JX/?mibextid            }

            trips.forEach((trip) => {
                const card = document.createElement('div');=wwXIfr"; 
        const CLOUD_NAME = "db9h7zm1h"; 
                card.id = `trip-${trip.id}`; 
                card.className = "w-1
        const UPLOAD_PRESET = "souq_upload"; 
        const CLOUDINARY_1/12 md:w-full max-w-sm mx-auto bg-gray-900URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/auto/upload`; border border-gray-700 rounded-2xl overflow-hidden shadow-lg shadow-teal-50

        let isAdmin = false; 
        let tripsData = []; 
        let bannerData = [];
0/10 transition-all duration-300 flex flex-col h-full";

                let media        let db, auth; 
        let isEditing = false, editTripId = null, oldImages =List = Array.isArray(trip.images) ? trip.images : (trip.mainImageUrl ? [trip. [];
        let pendingDelete = null; 
        let currentBookingTrip = null;

        let isTrimainImageUrl] : ['https://via.placeholder.com/400x300']);
                letpsLoaded = false;
        let isBannerLoaded = false;
        let deepLinkHandled = false; mediaHtml = '';
                let controlsHtml = '';

                if (mediaList.length > 0) {

        setTimeout(() => {
            const loader = document.getElementById('loader');
            if (loader) {
                    mediaHtml = mediaList.map((url, index) => {
                        const optUrl = getOptim
                loader.classList.add('loader-hidden');
                setTimeout(() => loader.remove(), 50izedUrl(url, 600); 
                        const isVid = isVideo(url);
                        0);
            }
        }, 4000);

        function getOptimizedUrl(url,const pointerStyle = index === 0 ? 'pointer-events: auto' : 'pointer-events: none'; width = 600) {
            if (typeof url === 'string' && url.includes('cloudinary
                        
                        if (isVid) {
                            return `<div class="absolute inset-0 w-full.com')) {
                const transformation = `f_auto,q_auto,w_${width}`;
                 h-full transition-opacity duration-500 ${index === 0 ? '' : 'opacity-0'if (!url.includes('/upload/')) return url;
                const parts = url.split('/upload/');
}" style="${pointerStyle}">
                                        <video src="${optUrl}" 
                                            class="w-                if (parts[1].startsWith('v1')) {
                    return `${parts[0]}/upload/${transformationfull h-full object-cover" 
                                            controls preload="metadata" playsinline
                                        ></video}/${parts[1]}`;
                } else {
                    return url.replace('/upload/', `/upload/${transformation>
                                    </div>`;
                        } else {
                            return `<img src="${optUrl}" 
                               }/`);
                }
            }
            return url;
        }

        async function compressImage(file         class="slide-media absolute inset-0 w-full h-full object-cover transition-opacity duration-, maxWidth = 1200, quality = 0.8) {
            if (!file.type500 ${index === 0 ? '' : 'opacity-0'}" 
                                        loading="lazy.match(/image.*/)) return file; 
            return new Promise((resolve, reject) => {
                const reader"
                                        style="${pointerStyle}"
                                        onclick="openLightbox('${url}')">`;
                        } = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = (event)
                    }).join('');

                    if (mediaList.length > 1) {
                        controlsHtml =  => {
                    const img = new Image();
                    img.src = event.target.result;
                    `
                            <div class="absolute top-1/2 -translate-y-1/2 w-full fleximg.onload = () => {
                        const elem = document.createElement('canvas');
                        let width = img justify-between px-2 z-20 pointer-events-none">
                                <button onclick="event..width;
                        let height = img.height;
                        if (width > maxWidth) {
                            heightstopPropagation(); changeSlide(this, -1)" class="bg-black/40 hover:bg-black/ *= maxWidth / width;
                            width = maxWidth;
                        }
                        elem.width = width;
                        70 text-white w-8 h-8 rounded-full flex items-center justify-center backdrop-blurelem.height = height;
                        const ctx = elem.getContext('2d');
                        ctx.drawImage(-sm pointer-events-auto transition-opacity opacity-70 hover:opacity-100"><i classimg, 0, 0, width, height);
                        ctx.toBlob((blob) => {
="fas fa-chevron-right"></i></button>
                                <button onclick="event.stopPropagation(); changeSlide                            if (!blob) {
                                resolve(file); // Fallback to original
                            } else {
                                resolve((this, 1)" class="bg-black/40 hover:bg-black/70 text-new File([blob], file.name, { type: file.type, lastModified: Date.now() }));white w-8 h-8 rounded-full flex items-center justify-center backdrop-blur-sm pointer-
                            }
                        }, file.type, quality);
                    };
                    img.onerror = () => resolveevents-auto transition-opacity opacity-70 hover:opacity-100"><i class="fas fa-(file); // Fallback on error
                };
                reader.onerror = () => resolve(file); //chevron-left"></i></button>
                            </div>
                            <div class="absolute top-4 left-4 Fallback on error
            });
        }

        function removeLoader() {
            const loader = document. bg-black/60 text-white text-[10px] px-2 py-1 rounded-fullgetElementById('loader');
            if (loader && !loader.classList.contains('loader-hidden')) {
                 backdrop-blur-sm z-20 slide-counter">1/${mediaList.length}</div>
                        `;loader.classList.add('loader-hidden');
                setTimeout(() => loader.remove(), 500);
                    }
                }

                const tripPhone = trip.whatsappPhone || DEFAULT_PHONE;
                let
            }
        }

        const firebaseConfig = {
          apiKey: "AIzaSyCTo8 remainingTime = '', isExpired = false, dateStr = '', timeStr = '';
                
                if (tripDhvaAmNtV9OIgY5eLOeVgF7iQqlYk",
          auth.status === 'expired') {
                    remainingTime = 'Ø§Ù†ØªÙ‡Øª';
                    isExpired = true;Domain: "faculty-of-commerce-2025.firebaseapp.com",
          databaseURL:
                } else if (trip.departureDate) {
                    const diffMs = new Date(trip.departure "https://faculty-of-commerce-2025-default-rtdb.europe-west1Date) - new Date();
                    if (diffMs > 0) remainingTime = `${Math.floor(.firebasedatabase.app",
          projectId: "faculty-of-commerce-2025",diffMs / (86400000))} ÙŠÙˆÙ… Ù…ØªØ¨Ù‚ÙŠ`;
                    else { remainingTime
          storageBucket: "faculty-of-commerce-2025.firebasestorage.app", = 'Ø§Ù†ØªÙ‡Øª'; isExpired = true; }
                }

                if (trip.departureDate)
          messagingSenderId: "312259778835",
          appId {
                    const d = new Date(trip.departureDate);
                    dateStr = d.toLocaleDateString: "1:312259778835:web:50429('ar-EG');
                    timeStr = d.toLocaleTimeString('en-US', {hour: 'numeric9bb2de918596b62e6",
          measurementId: "G-', minute:'2-digit', hour12: true});
                }

                const statusTag = trip.QJZB7E2D5R"
        };
        const tripsPath = `artifacts/${firebaseConfigstatus === 'expired' ? `<div class="absolute top-4 left-4 bg-red-600.projectId}/public/data/trips`; 
        const bannerPath = `artifacts/${firebaseConfig.projectId text-white text-[10px] font-bold px-2 py-1 rounded shadow-md z-}/public/data/banner`; 

        window.showNotification = function(msg, type) {
            30 animate-pulse">Ø§Ù†ØªÙ‡Øª ğŸ”¥</div>` : '';

                const adminControls = isAdmin ? `
const notif = document.createElement('div');
            // Z-Index extremely high to be on top of modals
                    <div class="flex flex-wrap justify-between gap-2 mb-3 border-b border-gray            notif.className = `fixed top-12 left-1/2 -translate-x-1/2 px--700 pb-3">
                        <button onclick="toggleTripStatus('${trip.id}', '${trip.status === 'expired' ? 'active' : 'expired'}')" class="flex-1 bg-yellow-6 py-3 rounded-xl text-white shadow-2xl notification-toast transition-all duration-500 opacity-0 transform translate-y-[-20px] ${type === 'error' ? 'bg-900/40 text-yellow-400 hover:bg-opacity-60 px-2red-600/95' : type === 'success' ? 'bg-green-600 py-1.5 rounded text-xs flex items-center justify-center gap-1.5"><i class/95' : 'bg-gray-700/95'} backdrop-blur-md border border="fas fa-sync-alt"></i> Ø§Ù„Ø­Ø§Ù„Ø©</button>
                        <button onclick="prepareEditTrip('${trip.id}')" class="flex-1 bg-blue-900/40 text-blue-4-white/10 font-bold text-center w-max max-w-[90%]`;
            notif00 hover:bg-blue-900/60 px-2 py-1.5 rounded text.innerHTML = msg;
            document.body.appendChild(notif);
            setTimeout(() => { notif-xs flex items-center justify-center gap-1.5"><i class="fas fa-pen"></i>.classList.remove('opacity-0', 'translate-y-[-20px]'); }, 50); ØªØ¹Ø¯ÙŠÙ„</button>
                        <button onclick="confirmDelete('${trip.id}', '${trip.title}', 'trip')" class="flex-1 bg-red-900/40 text-red-400
            setTimeout(() => { notif.classList.add('opacity-0', 'translate-y-[-2 hover:bg-red-900/60 px-2 py-1.5 rounded text-xs0px]'); setTimeout(() => notif.remove(), 500); }, 4000);
        }

        async function uploadToCloudinary(file) {
            let fileToUpload = file;
 flex items-center justify-center gap-1.5"><i class="fas fa-trash-alt"></i>            try {
                fileToUpload = await compressImage(file);
            } catch (e) {
 Ø­Ø°Ù</button>
                    </div>
                ` : '';

                const showMoreBtn = trip.description && trip.description.length > 100 
                    ? `<button id="btn-desc-${trip.id                console.warn("Compression failed, using original", e);
            }

            const formData = new FormData();
}" onclick="toggleDesc('${trip.id}')" class="text-teal-400 text-xs mt            formData.append('file', fileToUpload);
            formData.append('upload_preset', UPLOAD_PRESET);
            try {
                const response = await fetch(CLOUDINARY_URL, { method-1 hover:underline cursor-pointer">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯</button>` 
                    : '';

                card.innerHTML: 'POST', body: formData });
                if (!response.ok) throw new Error("ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹ = `
                    <div class="trip-card-image-container relative h-64 bg-gray-");
                const data = await response.json();
                return data.secure_url; 
            }800 group flex-shrink-0">
                        ${mediaHtml}
                        ${controlsHtml}
                         catch (error) { console.error(error); throw error; }
        }

        function isVideo(<div class="absolute top-4 right-4 bg-teal-600/90 text-whiteurl) {
            return url.match(/\.(mp4|webm|ogg|mov)$/i) || text-[10px] font-bold px-2 py-1 rounded shadow-md z-20 pointer-events-none">${trip.durationText || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                        ${statusTag}
                         url.includes('/video/upload/');
        }

        function checkDeepLink() {
            if (deepLinkHandled) return;
            const urlParams = new URLSearchParams(window.location.search);
            <button onclick="shareTrip('${trip.title}', '?tripId=${trip.id}')" class="absolute bottomconst tripId = urlParams.get('tripId');
            if (tripId) {
                const element = document.getElementById(`trip-${tripId}`);
                if (element) {
                    setTimeout(() => {
                        element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        element.classList.-4 right-4 bg-white text-gray-900 w-8 h-8 rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform z-20"><i class="fas fa-share-alt"></i></button>
                    </div>
                    <div class="add('highlight-card');
                        setTimeout(() => element.classList.remove('highlight-card'), 50p-5 bg-gray-800/50 rounded-b-2xl flex flex-col flex00);
                    }, 500);
                    deepLinkHandled = true;
                }
-grow"> 
                        ${adminControls}
                        <div class="flex-grow">
                            <div            }
        }

        function checkAllLoaded() {
            if (isTripsLoaded && isBanner class="flex justify-between items-start mb-2">
                                <h3 class="text-lg fontLoaded) {
                checkDeepLink();
                removeLoader();
                initVideoObserver(); 
            }-bold text-white leading-tight">${trip.title}</h3>
                                <span class="text-teal-
        }

        function initVideoObserver() {
            const observer = new IntersectionObserver((entries) => {400 font-extrabold text-lg whitespace-nowrap">${trip.price} <span class="
                entries.forEach(entry => {
                    if (!entry.isIntersecting) {
                        const videotext-xs font-normal text-gray-300">Ø¬.Ù…</span></span>
                            </div>
                             = entry.target;
                        if (!video.paused) {
                            video.pause();
                        }

                            <div id="desc-${trip.id}" class="text-gray-300 text-xs                    }
                });
            }, { threshold: 0.5 }); 

            document.querySelectorAll('video line-clamp-2 font-medium transition-all duration-300">
                                ${trip.description}').forEach(video => {
                observer.observe(video);
            });
        }

        async function
                            </div>
                            ${showMoreBtn}

                            <div class="text-gray-300 text initApp() {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);-[11px] border-t border-gray-700 pt-3 mt-3 space-y
            auth = getAuth(app);

            onAuthStateChanged(auth, (user) => {
                -2">
                                <div class="flex justify-between items-center">
                                    <span class="if (user && user.uid === ADMIN_UID) {
                    isAdmin = true;
                    updateUIFortext-gray-400">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø°Ù‡Ø§Ø¨: <span class="text-white font-bold fontAdmin(true);
                    showNotification("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…", "success");
                } else-mono">${dateStr}</span></span>
                                    <span class="${isExpired ? 'text-red-5 {
                    isAdmin = false;
                    updateUIForAdmin(false);
                    if (!user) signInAn00 font-bold' : 'text-yellow-500'}"><i class="fas fa-hourglassonymously(auth).catch(e => console.log(e));
                }
                listenForTrips-half ml-1"></i> ${remainingTime}</span>
                                </div>
                                <div class="flex justify();
                listenForBanner();
            });

            document.getElementById('companyName').textContent = COMPANY_NAME-between items-center">
                                    <span class="text-gray-400">ÙˆÙ‚Øª Ø§Ù„Ø°Ù‡;
            document.getElementById('footerCompanyName').textContent = COMPANY_NAME;
            document.querySelectorAll('.fb-Ø§Ø¨: <span class="text-white font-bold font-mono ltr inline-block">${timeStr}link').forEach(l => l.href = FB_PAGE);
            document.querySelectorAll('.wa-link').</span></span>
                                </div>
                                <div class="flex justify-between"><span><i class="fas faforEach(l => l.href = `https://wa.me/${DEFAULT_PHONE}`);
        }

        -map-marker-alt ml-1 text-blue-500"></i> ${trip.location}</span>window.openLightbox = function(src) {
            const lb = document.getElementById('mainLightbox');
            <span><i class="fas fa-users ml-1 text-blue-500"></i> Ø§Ù„Ø§Ù…Ø§ÙƒÙ†const container = document.getElementById('lightboxContent');
            container.innerHTML = ''; 
            const optimizedSrc = Ø§Ù„Ù…ØªØ§Ø­Ù‡: ${trip.availableSeats || '0'}</span></div>
                            </div>
                        </div>
                        < getOptimizedUrl(src, 1200); 
            if (isVideo(src)) {
button onclick="openBookingOptions('${trip.title}', '${trip.code}', '${trip.price}', '${tripPhone                container.innerHTML = `<video src="${optimizedSrc}" controls autoplay class="max-w-full max-h}')" class="w-full bg-gradient-to-r from-teal-600 to-blue-[80vh] rounded-lg"></video>`;
            } else {
                container.innerHTML = `<img-600 hover:from-teal-700 text-white font-bold py-2.5 src="${optimizedSrc}" class="max-w-full max-h-[80vh] rounded-lg"> px-4 rounded-xl shadow-lg mt-4 text-sm flex justify-center items-center gap-`;
            }
            lb.classList.add('active');
        }
        window.closeLightbox =2 transition-transform active:scale-95"><i class="fas fa-ticket-alt text-lg"> function() {
            document.getElementById('mainLightbox').classList.remove('active');
            document.getElementById('</i> Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button>
                    </div>
                `;
                container.appendChild(card);
            });lightboxContent').innerHTML = ''; 
        }

        window.changeSlide = function(btn, direction) {
            checkDeepLink();
            initVideoObserver();
        }

        function renderBanner(items) {
            const card = btn.closest('.trip-card-image-container');
            const mediaItems = card
            const track = document.getElementById('marquee-track');
            const videoContainer = document.getElementById('video.querySelectorAll('.slide-media');
            const counter = card.querySelector('.slide-counter');
            let active-container');
            const videoSection = document.getElementById('video-section');
            const images = items.Index = Array.from(mediaItems).findIndex(el => !el.classList.contains('opacity-0'));filter(item => !isVideo(item.url));
            const videos = items.filter(item => isVideo

            mediaItems[activeIndex].classList.add('opacity-0');
            mediaItems[activeIndex].style.(item.url));

            if (images.length === 0) track.innerHTML = ''; 
            pointerEvents = 'none';
            if(mediaItems[activeIndex].tagName === 'VIDEO') mediaItems[activeIndexelse {
                const allImages = [...images, ...images, ...images]; 
                track.innerHTML =].pause();

            let nextIndex = activeIndex + direction;
            if (nextIndex >= mediaItems. allImages.map(img => {
                    const optUrl = getOptimizedUrl(img.url, length) nextIndex = 0;
            if (nextIndex < 0) nextIndex = mediaItems.300);
                    return `
                    <div class="relative w-48 h-32 mdlength - 1;

            mediaItems[nextIndex].classList.remove('opacity-0');
            media:w-60 md:h-40 mx-2 flex-shrink-0 rounded-xl overflow-Items[nextIndex].style.pointerEvents = 'auto'; 
            
            if(counter) counter.hidden border border-gray-800 group bg-gray-900 transform translate-z-0">textContent = `${nextIndex + 1}/${mediaItems.length}`;
        }

        window.toggleDesc =
                        <img src="${optUrl}" 
                             onclick="openLightbox('${img.url}')"
                              function(id) {
            const descEl = document.getElementById(`desc-${id}`);
            const btnElloading="lazy" 
                             class="w-full h-full object-cover transition-transform duration-5 = document.getElementById(`btn-desc-${id}`);
            if (descEl.classList.contains('line-00 group-hover:scale-110 opacity-90 hover:opacity-100 cursor-clamp-2')) {
                descEl.classList.remove('line-clamp-2');
                descElpointer">
                        ${isAdmin ? `<button onclick="event.stopPropagation(); confirmDelete('${img.id}', 'Øµ.classList.add('line-clamp-none');
                btnEl.textContent = 'Ø¹Ø±Ø¶ Ø£Ù‚Ù„';
            ÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù…Ø¹Ø±Ø¶', 'banner')" class="absolute top-1 right-1 bg-red-600} else {
                descEl.classList.add('line-clamp-2');
                descEl.classList/80 hover:bg-red-600 text-white w-7 h-7 rounded-full.remove('line-clamp-none');
                btnEl.textContent = 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯';
            }
 flex items-center justify-center text-sm shadow-md z-10 backdrop-blur-sm transition-        }

        function renderTrips(trips) {
            const container = document.getElementById('tripsall hover:scale-110"><i class="fas fa-trash-alt"></i></button>` :-container');
            container.innerHTML = ''; 

            if (trips.length === 0) { ''}
                    </div>
                `}).join('');
            }

            if (videos.length > 0
                container.innerHTML = `<div class="col-span-full flex flex-col items-center justify-) {
                videoSection.classList.remove('hidden');
                videoContainer.innerHTML = videos.map(center py-16 text-center opacity-80"><i class="fas fa-suitcase-rolling text-vid => {
                    const optUrl = getOptimizedUrl(vid.url, 600);
                    return `
                    <div class="relative w-full mx-auto rounded-2xl overflow-hidden shadow5xl text-teal-500 mb-4"></i><h3 class="text-2xl font-bold text-gray-200">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø­Ù„Ø§Øª</h3></div>`;
                return;
            -2xl border border-gray-700 bg-gray-900/50 mb-8}

            trips.forEach((trip) => {
                const card = document.createElement('div');
 last:mb-0">
                        <video controls playsinline preload="metadata" class="w-full h-                card.id = `trip-${trip.id}`; 
                card.className = "w-1156 md:h-80 object-cover cursor-pointer">
                            <source src="${optUrl}" type="video/mp4">
                        </video>
                         ${isAdmin ? `<button onclick="confirmDelete('${/12 md:w-full max-w-sm mx-auto bg-gray-900 border border-gray-700 rounded-2xl overflow-hidden shadow-lg shadow-teal-500vid.id}', 'Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'banner')" class="absolute top-4 right-4 bg-red-/10 transition-all duration-300 flex flex-col h-full";

                let mediaList600 hover:bg-red-700 text-white px-3 py-1.5 rounded = Array.isArray(trip.images) ? trip.images : (trip.mainImageUrl ? [trip.main-lg text-sm shadow-lg z-10 backdrop-blur-md flex items-center gap-2ImageUrl] : ['https://via.placeholder.com/400x300']);
                let media"><i class="fas fa-trash-alt"></i> Ø­Ø°Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>` : ''}
                    </div>
Html = '';
                let controlsHtml = '';

                if (mediaList.length > 0) {
                `}).join('');
            } else {
                videoSection.classList.add('hidden');
                video                    mediaHtml = mediaList.map((url, index) => {
                        const optUrl = getOptimizedContainer.innerHTML = '';
            }
            initVideoObserver();
        }

        window.handleTripSubmitUrl(url, 600); 
                        const isVid = isVideo(url);
                        const = async function(event) {
            event.preventDefault();
            if (!isAdmin) return;

            // pointerStyle = index === 0 ? 'pointer-events: auto' : 'pointer-events: none';
 Check form validity manually to show toast
            const form = document.getElementById('addTripForm');
            if (!form                        
                        if (isVid) {
                            return `<div class="absolute inset-0 w-full h.checkValidity()) {
                showNotification("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©", "error");-full transition-opacity duration-500 ${index === 0 ? '' : 'opacity-0'}"
                return;
            }

            const btn = document.getElementById('submitBtn');
            const originalText style="${pointerStyle}">
                                        <video src="${optUrl}" 
                                            class="w-full = btn.innerHTML;
            btn.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...'; btn.disabled = true;

            const h-full object-cover" 
                                            controls preload="metadata" playsinline
                                        ></video> title = document.getElementById('tripTitle').value;
            const price = document.getElementById('tripPrice').value
                                    </div>`;
                        } else {
                            return `<img src="${optUrl}" 
                                        ;
            const location = document.getElementById('tripLocation').value;
            const whatsappPhone = document.getElementByIdclass="slide-media absolute inset-0 w-full h-full object-cover transition-opacity duration-5('tripPhone').value; 
            const description = document.getElementById('tripDesc').value;
            const departureDate = document.getElementById('departureDate').value;
            const availableSeats = parseInt(document.getElementById('00 ${index === 0 ? '' : 'opacity-0'}" 
                                        loading="lazy"
                                        style="${pointerStyle}"
                                        onclick="openLightbox('${url}')">`;
                        }
availableSeats').value) || 0;
            const nights = document.getElementById('nightsSelect').value === '                    }).join('');

                    if (mediaList.length > 1) {
                        controlsHtml = `
other' ? document.getElementById('nightsCustom').value : document.getElementById('nightsSelect').value;
            const                            <div class="absolute top-1/2 -translate-y-1/2 w-full flex justify days = document.getElementById('daysSelect').value === 'other' ? document.getElementById('daysCustom').value :-between px-2 z-20 pointer-events-none">
                                <button onclick="event.stopPropagation(); changeSlide(this, -1)" class="bg-black/40 hover:bg-black/7 document.getElementById('daysSelect').value;
            const durationText = `${days} Ø£ÙŠØ§Ù… / ${nights} Ù„ÙŠØ§Ù„ÙŠ`;

            const imageFiles = document.getElementById('tripImageFile').files;
            let imagesArray =0 text-white w-8 h-8 rounded-full flex items-center justify-center backdrop-blur- oldImages; 

            if (imageFiles.length > 0) {
                try {
                    constsm pointer-events-auto transition-opacity opacity-70 hover:opacity-100"><i class=" uploadPromises = Array.from(imageFiles).map(file => uploadToCloudinary(file));
                    imagesfas fa-chevron-right"></i></button>
                                <button onclick="event.stopPropagation(); changeSlide(Array = await Promise.all(uploadPromises);
                } catch (e) { 
                    showNotification("this, 1)" class="bg-black/40 hover:bg-black/70 text-whiteÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±", "error"); 
                    btn.innerHTML = originalText; btn.disabled = false; return;  w-8 h-8 rounded-full flex items-center justify-center backdrop-blur-sm pointer-events
                }
            } else if (!isEditing) {
                 showNotification("Ø§Ø®ØªØ± ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„", "-auto transition-opacity opacity-70 hover:opacity-100"><i class="fas fa-chevronerror"); 
                 btn.innerHTML = originalText; btn.disabled = false; return;
            }

-left"></i></button>
                            </div>
                            <div class="absolute top-4 left-4 bg-black/60 text-white text-[10px] px-2 py-1 rounded-full backdrop            try {
                const tripData = { 
                    title, price, location, whatsappPhone, description, departureDate, availableSeats, durationText, 
                    mainImageUrl: imagesArray[0], 
                    images-blur-sm z-20 slide-counter">1/${mediaList.length}</div>
                        `;
: imagesArray 
                };

                if (isEditing) {
                    await updateDoc(doc(db                    }
                }

                const tripPhone = trip.whatsappPhone || DEFAULT_PHONE;
                let remainingTime = '', isExpired = false, dateStr = '', timeStr = '';
                
                if (trip., tripsPath, editTripId), tripData);
                    showNotification("ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­", "success");
                } else {
                    const code = 'TRIP-' + Math.floor(10status === 'expired') {
                    remainingTime = 'Ø§Ù†ØªÙ‡Øª';
                    isExpired = true;
00 + Math.random() * 9000);
                    await addDoc(collection(db,                } else if (trip.departureDate) {
                    const diffMs = new Date(trip.departureDate tripsPath), { ...tripData, code, status: 'active', createdAt: Timestamp.now() });
                    ) - new Date();
                    if (diffMs > 0) remainingTime = `${Math.floor(diffshowNotification("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­", "success");
                }
                closeTripModal();
Ms / (86400000))} ÙŠÙˆÙ… Ù…ØªØ¨Ù‚ÙŠ`;
                    else { remainingTime =            } catch (error) { showNotification("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸", "error"); } 
            finally 'Ø§Ù†ØªÙ‡Øª'; isExpired = true; }
                }

                if (trip.departureDate) { { btn.innerHTML = originalText; btn.disabled = false; }
        }

        window.prepareEditTrip = function(id) {
            if (!isAdmin) return;
            const trip = tripsData.find(t => t.id === id);
            isEditing = true; editTripId = id; 

                    const d = new Date(trip.departureDate);
                    dateStr = d.toLocaleDateString('ar-EG');
                    timeStr = d.toLocaleTimeString('en-US', {hour: 'numeric', minute:'2-digit', hour12: true});
                }

                const statusTag = trip.status === 'expired' ? `<div class="absolute top-4 left-4 bg-red-600 text            oldImages = Array.isArray(trip.images) ? trip.images : (trip.mainImageUrl ? [-white text-[10px] font-bold px-2 py-1 rounded shadow-md z-3trip.mainImageUrl] : []);

            const modal = document.getElementById('addTripModal');
            modal.0 animate-pulse">Ø§Ù†ØªÙ‡Øª ğŸ”¥</div>` : '';

                const adminControls = isAdmin ? `
                    <div class="flex flex-wrap justify-between gap-2 mb-3 border-b border-gray-classList.remove('hidden'); modal.classList.add('flex');
            document.getElementById('modalTitle').textContent = "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø­Ù„Ø©";
            document.getElementById('submitBtn').innerHTML = `<i class="fas fa-save700 pb-3">
                        <button onclick="toggleTripStatus('${trip.id}', '${trip. ml-1"></i> Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª`;

            document.getElementById('tripTitle').value = trip.titlestatus === 'expired' ? 'active' : 'expired'}')" class="flex-1 bg-yellow-9;
            document.getElementById('tripLocation').value = trip.location;
            document.getElementById('tripPrice00/40 text-yellow-400 hover:bg-opacity-60 px-2 py').value = trip.price;
            document.getElementById('tripPhone').value = trip.whatsappPhone || '';-1.5 rounded text-xs flex items-center justify-center gap-1.5"><i class=" 
            document.getElementById('departureDate').value = trip.departureDate;
            document.getElementById('availablefas fa-sync-alt"></i> Ø§Ù„Ø­Ø§Ù„Ø©</button>
                        <button onclick="prepareEditTrip('${trip.Seats').value = trip.availableSeats;
            document.getElementById('tripDesc').value = trip.description;id}')" class="flex-1 bg-blue-900/40 text-blue-40
        }
        
        // Correct Add Trip Function
        window.openAddTripModal = function() {
            0 hover:bg-blue-900/60 px-2 py-1.5 rounded text-if (!isAdmin) return;
            isEditing = false;
            editTripId = null;
            oldxs flex items-center justify-center gap-1.5"><i class="fas fa-pen"></i> ØªØ¹Ø¯ÙŠÙ„</button>
                        <button onclick="confirmDelete('${trip.id}', '${trip.title}', 'trip')" class="flex-1 bg-red-900/40 text-red-400 hover:bg-red-900/60 px-2 py-1.5 rounded text-xs flexImages = [];
            document.getElementById('addTripForm').reset();
            document.getElementById('modalTitle').textContent = "Ø¥Ø¶Ø§ÙØ© Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©";
            document.getElementById('submitBtn').innerHTML = "Ø­ÙØ¸ ÙˆÙ†Ø´Ø± Ø§Ù„Ø±Ø­Ù„Ø©";
            
            const modal = document.getElementById('addTripModal');
            modal.classList.remove('hidden'); 
            modal.classList.add('flex');
        }

        window.toggle items-center justify-center gap-1.5"><i class="fas fa-trash-alt"></i> Ø­Ø°ÙLoginModal = function() { 
            document.getElementById('loginModal').classList.toggle('hidden'); 
</button>
                    </div>
                ` : '';

                const showMoreBtn = trip.description && trip.            document.getElementById('loginModal').classList.toggle('flex'); 
            document.getElementById('mobile-menudescription.length > 100 
                    ? `<button id="btn-desc-${trip.id}"').classList.remove('open');
            document.getElementById('mobile-menu-overlay').classList.remove('active onclick="toggleDesc('${trip.id}')" class="text-teal-400 text-xs mt-1 hover:underline cursor-pointer">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯</button>` 
                    : '';

                card.innerHTML =');
        }
        
        window.handleLogin = async function(e) { e.preventDefault(); try { await signInWithEmailAndPassword(auth, document.getElementById('emailInput').value, document.getElementById('passInput `
                    <div class="trip-card-image-container relative h-64 bg-gray-8').value); window.toggleLoginModal(); } catch (error) { showNotification("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø·Ø£", "00 group flex-shrink-0">
                        ${mediaHtml}
                        ${controlsHtml}
                        <error"); } }
        window.handleLogout = async function() { await signOut(auth); window.location.div class="absolute top-4 right-4 bg-teal-600/90 text-white textreload(); }

        function listenForTrips() { 
            onSnapshot(query(collection(db,-[10px] font-bold px-2 py-1 rounded shadow-md z-20 pointer- tripsPath), orderBy("createdAt", "desc")), (snap) => { 
                tripsData = []; events-none">${trip.durationText || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>
                        ${statusTag}
                        <
                snap.forEach(doc => tripsData.push({id: doc.id, ...doc.data()button onclick="shareTrip('${trip.title}', '?tripId=${trip.id}')" class="absolute bottom-})); 
                renderTrips(tripsData); 
                isTripsLoaded = true;
                4 right-4 bg-white text-gray-900 w-8 h-8 rounded-full shadowcheckAllLoaded(); 
            }); 
        }
        function listenForBanner() { 
            on-lg flex items-center justify-center hover:scale-110 transition-transform z-20"><Snapshot(query(collection(db, bannerPath), orderBy("createdAt", "desc")), (snap) => { i class="fas fa-share-alt"></i></button>
                    </div>
                    <div class="p
                bannerData = []; 
                snap.forEach(doc => bannerData.push({id: doc.-5 bg-gray-800/50 rounded-b-2xl flex flex-col flex-id, ...doc.data()})); 
                renderBanner(bannerData); 
                isBannerLoaded =grow"> 
                        ${adminControls}
                        <div class="flex-grow">
                            <div class true;
                checkAllLoaded(); 
            }); 
        }

        window.confirmDelete = function="flex justify-between items-start mb-2">
                                <h3 class="text-lg font-(id, title, type) { pendingDelete = { id, title, type }; document.getElementById('deleteModalbold text-white leading-tight">${trip.title}</h3>
                                <span class="text-teal-4').classList.remove('hidden'); document.getElementById('deleteModal').classList.add('flex'); }
        window00 font-extrabold text-lg whitespace-nowrap">${trip.price} <span class="text.executeDelete = async function() { if(!pendingDelete) return; try { await deleteDoc(doc(db-xs font-normal text-gray-300">Ø¬.Ù…</span></span>
                            </div>
                            
, pendingDelete.type==='trip'?tripsPath:bannerPath, pendingDelete.id)); showNotification("                            <div id="desc-${trip.id}" class="text-gray-300 text-xs lineØªÙ… Ø§Ù„Ø­Ø°Ù", "success"); } catch(e){showNotification("Ø®Ø·Ø£","error")} window.closeDelete-clamp-2 font-medium transition-all duration-300">
                                ${trip.description}
Modal(); }
        window.closeDeleteModal = function() { document.getElementById('deleteModal').classList.add                            </div>
                            ${showMoreBtn}

                            <div class="text-gray-300 text-[('hidden'); document.getElementById('deleteModal').classList.remove('flex'); }
        window.openBookingOptions11px] border-t border-gray-700 pt-3 mt-3 space-y- = function(title, code, price, phone) { currentBookingTrip = { title, code, price, phone2">
                                <div class="flex justify-between items-center">
                                    <span class="text }; document.getElementById('bookingOptionsModal').classList.remove('hidden'); document.getElementById('bookingOptionsModal').classList-gray-400">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø°Ù‡Ø§Ø¨: <span class="text-white font-bold font-.add('flex'); }
        window.closeBookingOptions = function() { document.getElementById('bookingOptionsModalmono">${dateStr}</span></span>
                                    <span class="${isExpired ? 'text-red-50').classList.add('hidden'); document.getElementById('bookingOptionsModal').classList.remove('flex'); }
        0 font-bold' : 'text-yellow-500'}"><i class="fas fa-hourglass-window.handleInquiry = function() { window.open(`https://wa.me/${currentBookingTrip.phonehalf ml-1"></i> ${remainingTime}</span>
                                </div>
                                <div class="flex justify-}?text=${encodeURIComponent(`Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† ${currentBookingTrip.title} (${currentBookingTrip.code})between items-center">
                                    <span class="text-gray-400">ÙˆÙ‚Øª Ø§Ù„Ø°Ù‡Ø§Ø¨`)}`); closeBookingOptions(); }
        window.openBookingForm = function() { closeBookingOptions(); document: <span class="text-white font-bold font-mono ltr inline-block">${timeStr}</span>.getElementById('formTripTitle').value=currentBookingTrip.title; document.getElementById('formTripPrice').value</span>
                                </div>
                                <div class="flex justify-between"><span><i class="fas fa-=currentBookingTrip.price; document.getElementById('formCount').value=1; window.updateTotalPrice(); documentmap-marker-alt ml-1 text-blue-500"></i> ${trip.location}</span><span>.getElementById('bookingFormModal').classList.remove('hidden'); document.getElementById('bookingFormModal').classList.add<i class="fas fa-users ml-1 text-blue-500"></i> Ø§Ù„Ø§Ù…Ø§ÙƒÙ† Ø§Ù„Ù…('flex'); }
        window.closeBookingForm = function() { document.getElementById('bookingFormModal').classListØªØ§Ø­Ù‡: ${trip.availableSeats || '0'}</span></div>
                            </div>
                        </div>
                        <button.add('hidden'); document.getElementById('bookingFormModal').classList.remove('flex'); }
        window. onclick="openBookingOptions('${trip.title}', '${trip.code}', '${trip.price}', '${tripPhone}')updateTotalPrice = function() { document.getElementById('formTotal').textContent = (parseInt(document.getElementById('formCount" class="w-full bg-gradient-to-r from-teal-600 to-blue-').value||1) * parseFloat(currentBookingTrip.price||0)).toLocaleString() + ' Ø¬.Ù…';600 hover:from-teal-700 text-white font-bold py-2.5 px-4 rounded-xl shadow-lg mt-4 text-sm flex justify-center items-center gap-2 }
        window.finalizeBooking = function(e) { e.preventDefault(); window.open(`https://wa transition-transform active:scale-95"><i class="fas fa-ticket-alt text-lg"></i>.me/${currentBookingTrip.phone}?text=${encodeURIComponent(`Ø­Ø¬Ø²: ${currentBookingTrip.title}\nØ§Ù„Ø§Ø³Ù…: ${document.getElementById('clientName').value}\nØ§Ù„Ø¹Ø¯Ø¯: ${document.getElementById('form Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button>
                    </div>
                `;
                container.appendChild(card);
            });
Count').value}\nØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${document.getElementById('formTotal').textContent}`)}`); closeBookingForm(); }
        window.toggleTripStatus = async function(id, status) { await setDoc(doc(db            checkDeepLink();
            initVideoObserver();
        }

        function renderBanner(items) {
            const track = document.getElementById('marquee-track');
            const videoContainer = document.getElementById('video-, tripsPath, id), {status}, {merge:true}); }
        window.handleBannerSubmit = asynccontainer');
            const videoSection = document.getElementById('video-section');
            const images = items.filter(item => !isVideo(item.url));
            const videos = items.filter(item => isVideo( function(e) { e.preventDefault(); const files = document.getElementById('bannerFiles').files; if(!files.length) return; document.getElementById('bannerSubmitBtn').innerHTML='...'; try { const urls = await Promiseitem.url));

            if (images.length === 0) track.innerHTML = ''; 
            else.all([...files].map(f=>uploadToCloudinary(f))); await Promise.all(urls.map {
                const allImages = [...images, ...images, ...images]; 
                track.innerHTML = all(url=>addDoc(collection(db, bannerPath), {url, createdAt: Timestamp.now()}))); showImages.map(img => {
                    const optUrl = getOptimizedUrl(img.url, 3Notification("ØªÙ…","success"); window.closeBannerModal(); } catch(e){showNotification("Ø®Ø·Ø£","error00);
                    return `
                    <div class="relative w-48 h-32 md:w-60 md:h-40 mx-2 flex-shrink-0 rounded-xl overflow-hidden")} document.getElementById('bannerSubmitBtn').innerHTML='ØªØ£ÙƒÙŠØ¯'; }
        
        window.toggleBannerModal = function() { isAdmin? (document.getElementById('addBannerModal').classList.toggle('hidden'), document. border border-gray-800 group bg-gray-900 transform translate-z-0">
getElementById('addBannerModal').classList.toggle('flex')) : null; }
        window.closeTripModal =                        <img src="${optUrl}" 
                             onclick="openLightbox('${img.url}')"
                             loading function() { document.getElementById('addTripModal').classList.add('hidden'); document.getElementById('addTripModal="lazy" 
                             class="w-full h-full object-cover transition-transform duration-50').classList.remove('flex'); }
        window.closeBannerModal = function() { document.getElementById('add0 group-hover:scale-110 opacity-90 hover:opacity-100 cursor-pointerBannerModal').classList.add('hidden'); document.getElementById('addBannerModal').classList.remove('flex'); }">
                        ${isAdmin ? `<button onclick="event.stopPropagation(); confirmDelete('${img.id}', 'ØµÙˆØ±Ø©
        
        window.toggleMobileMenu = function() { 
            const menu = document.getElementById('mobile Ù…Ù† Ø§Ù„Ù…Ø¹Ø±Ø¶', 'banner')" class="absolute top-1 right-1 bg-red-600/-menu');
            const overlay = document.getElementById('mobile-menu-overlay');
            if (menu.80 hover:bg-red-600 text-white w-7 h-7 rounded-full flexclassList.contains('open')) {
                menu.classList.remove('open');
                overlay.classList.remove items-center justify-center text-sm shadow-md z-10 backdrop-blur-sm transition-all('active');
            } else {
                menu.classList.add('open');
                overlay.classList. hover:scale-110"><i class="fas fa-trash-alt"></i></button>` : ''add('active');
            }
        }
        
        window.addEventListener('scroll', () => {
}
                    </div>
                `}).join('');
            }

            if (videos.length > 0)            const menu = document.getElementById('mobile-menu');
            if (menu.classList.contains('open')) {
                videoSection.classList.remove('hidden');
                videoContainer.innerHTML = videos.map(vid {
                window.toggleMobileMenu();
            }
        });

        window.shareTrip = async function => {
                    const optUrl = getOptimizedUrl(vid.url, 600);
                    (t,l) { try{await navigator.clipboard.writeText(location.origin+location.pathname+return `
                    <div class="relative w-full mx-auto rounded-2xl overflow-hidden shadow-l); showNotification("Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·","success")}catch(e){} }
        window.previewBannerImages2xl border border-gray-700 bg-gray-900/50 mb-8 last = function(e) { document.getElementById('bannerPreview').innerHTML = [...e.target.files].map(:mb-0">
                        <video controls playsinline preload="metadata" class="w-full h-56 md:h-80 object-cover cursor-pointer">
                            <source src="${optUrl}" type="video/mp4">
                        </video>
                         ${isAdmin ? `<button onclick="confirmDelete('${vid.id}', 'Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'banner')" class="absolute top-4 right-4 bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-f => `<${f.type.startsWith('video')?'video':'img'} src="${URL.createObjectURL(f)}" class="w-16 h-16 object-cover border border-gray-600 rounded">`).join(''); }
        window.toggleCustomInput = function(selectId, customId) { const ellg text-sm shadow-lg z-10 backdrop-blur-md flex items-center gap-2"><i class="fas fa-trash-alt"></i> Ø­Ø°Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>` : ''}
                    </div>
                 = document.getElementById(customId); document.getElementById(selectId).value === 'other' ? (el.`}).join('');
            } else {
                videoSection.classList.add('hidden');
                videoContainerclassList.remove('hidden'), el.required=true) : (el.classList.add('hidden'), el..innerHTML = '';
            }
            initVideoObserver();
        }

        window.handleTripSubmit = async function(event) {
            // FIX: Prevent default immediately but manual check validity
            event.preventDefault();
            constrequired=false); }
        function updateUIForAdmin(l) { 
            const ml=document. form = document.getElementById('addTripForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            if (!isAdmin) return;
            const btn = documentgetElementById('mobileLoginBtn'), mo=document.getElementById('mobileLogoutBtn'), ma=document.getElementById('mobileAdmin.getElementById('submitBtn');
            const originalText = btn.innerHTML;
            btn.innerHTML = 'Ø¬Actions');
            if(l){ ml.classList.add('hidden'); mo.classList.remove('hidden'); ma.classList.remove('hidden'); ma.classList.add('grid'); }
            else { ml.classList.remove('hidden'); mo.classList.add('hidden'); ma.classList.add('hidden'); ma.classList.remove('grid'); }
            renderTrips(tripsData); renderBanner(bannerData);
        }
        window.onload = initApp;
    </script>
</head>
<body class="Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØ§Ù„Ø±ÙØ¹...'; btn.disabled = true;

            const title = document.getElementById('tripbg-gray-900 min-h-screen relative text-gray-100 selection:bg-teal-500 selection:text-white">

    <!-- Loading Screen -->
    <div id="loader">
        <div class="text-center">
            <i class="fas fa-plane-departure textTitle').value;
            const price = document.getElementById('tripPrice').value;
            const location = document-6xl text-teal-500 animate-bounce mb-4"></i>
            <h1 class.getElementById('tripLocation').value;
            const whatsappPhone = document.getElementById('tripPhone').value; ="text-4xl font-black text-white tracking-widest">Wolf TraVal</h1>
            <p
            const description = document.getElementById('tripDesc').value;
            const departureDate = document.getElementById(' class="text-gray-300 mt-2 text-sm animate-pulse">Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªØ·departureDate').value;
            const availableSeats = parseInt(document.getElementById('availableSeats').value) || Ø¨ÙŠÙ‚...</p>
        </div>
    </div>

    <!-- Install Button -->
    <button id="installBtn0;
            const nights = document.getElementById('nightsSelect').value === 'other' ? document.getElementById('nightsCustom').value : document.getElementById('nightsSelect').value;
            const days = document.getElementById('days" class="hidden fixed bottom-6 left-6 z-[9990] bg-gradient-to-r from-teal-600 to-blue-600 text-white px-5 py-3Select').value === 'other' ? document.getElementById('daysCustom').value : document.getElementById('daysSelect'). rounded-2xl shadow-2xl font-bold animate-bounce flex items-center gap-3 border border-value;
            const durationText = `${days} Ø£ÙŠØ§Ù… / ${nights} Ù„ÙŠØ§Ù„ÙŠ`;

            const imageFileswhite/20 hover:scale-105 transition-transform">
        <i class="fas fa- = document.getElementById('tripImageFile').files;
            let imagesArray = oldImages; 

            if (imageFiles.length > 0) {
                try {
                    const uploadPromises = Array.from(download text-xl"></i> ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    </button>
    <script>
        let deferredimageFiles).map(file => uploadToCloudinary(file));
                    imagesArray = await Promise.all(Prompt;
        const installBtn = document.getElementById('installBtn');
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.uploadPromises);
                } catch (e) { 
                    showNotification(e.message, "error");classList.remove('hidden');
        });
        installBtn.addEventListener('click', async () => {
             
                    btn.innerHTML = originalText; btn.disabled = false; return; 
                }
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null;
                installBtn.classList.add('hidden');
            }
        });
        window.addEventListener('appinstalled', () => {
            installBtn.classList.add('} else if (!isEditing) {
                 showNotification("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„", "error"); 
                 btn.innerHTML = originalText; btn.disabled = false; return;
            }

            try {
                const tripData = { 
                    title, price, location, whatsappPhone, description,hidden');
            deferredPrompt = null;
        });
    </script>

    <!-- Lightbox -->
 departureDate, availableSeats, durationText, 
                    mainImageUrl: imagesArray[0], 
                    images    <div id="mainLightbox" class="lightbox">
        <div class="lightbox-close" onclick=": imagesArray 
                };

                if (isEditing) {
                    await updateDoc(doc(dbcloseLightbox()"><i class="fas fa-times"></i></div>
        <div id="lightboxContent"></div>, tripsPath, editTripId), tripData);
                    showNotification("ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­",
    </div>

    <!-- Background -->
    <div class="fixed inset-0 z-0 h-[1 "success");
                } else {
                    const code = 'TRIP-' + Math.floor(1000dvh] w-full pointer-events-none">
        <img src="https://images.00 + Math.random() * 9000);
                    await addDoc(collection(db, tripsPath), { ...tripData, code, status: 'active', createdAt: Timestamp.now() });
                    pexels.com/photos/2559941/pexels-photo-255994showNotification("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­", "success");
                }
                closeTripModal();
            } catch (error) { showNotification("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸", "error"); } 
            finally1.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="w-full h-full object-cover object-center">
        <div class="absolute inset-0 bg-black/70"></div> 
    </div>

    <div class="relative z-10 flex flex-col min-h-screen">

        <!-- Navbar (Clean { btn.innerHTML = originalText; btn.disabled = false; }
        }

        window.prepareEditTrip = function(id) {
            if (!isAdmin) return;
            const trip = tripsData.finded: Full width, justified) -->
        <nav class="glass-nav sticky top-0 w-full flex items-(t => t.id === id);
            isEditing = true; editTripId = id; 
            oldImages = Array.isArray(trip.images) ? trip.images : (trip.mainImageUrl ? [trip.mainImageUrl] : []);

            const modal = document.getElementById('addTripModal');
            modal.classList.remove('hidden'); modal.classList.add('flex');
            document.getElementById('modalTitle').textContent = "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø­Ù„Ø©";
            document.getElementById('submitBtn').innerHTML = `<i class="fas fa-save ml-1"></i> Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª`;

            document.getElementById('tripTitle').value = trip.title;
            document.getElementById('tripLocation').value = trip.location;
            document.getElementById('tripPrice').value = trip.price;
            document.getElementById('tripPhone').value = trip.whatsappPhone || ''; 
            document.getElementById('departureDate').value = trip.departureDate;
            document.getElementById('availablecenter">
            <div class="w-full px-6 flex justify-between items-center h-full">
                <!-- Logo (Far Right) -->
                <button onclick="window.location.reload()" class="text-lg md:text-xl font-black text-white flex items-center gap-2 hover:text-tealSeats').value = trip.availableSeats;
            document.getElementById('tripDesc').value = trip.description;-400">
                    <i class="fas fa-plane-departure text-teal-400
        }
        
        // Correct Add Trip Function (Resets form)
        window.openAddTripModal = function() {
            if (!isAdmin) return;
            isEditing = false;
            editTrip"></i> <span id="companyName">Wolf TraVal</span>
                </button>

                <!-- Sidebar Button (Far Left) -->
                <button onclick="toggleMobileMenu()" class="text-white text-lg p-2 hover:text-teal-400 transition-colors">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>

        <!-- Sidebar & Overlay -->
        Id = null;
            oldImages = [];
            document.getElementById('addTripForm').reset();
            document.getElementById('modalTitle').textContent = "Ø¥Ø¶Ø§ÙØ© Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©";
            document.getElementById('submitBtn<div id="mobile-menu-overlay" class="mobile-menu-overlay" onclick="toggleMobileMenu()">').innerHTML = "Ø­ÙØ¸ ÙˆÙ†Ø´Ø± Ø§Ù„Ø±Ø­Ù„Ø©";
            
            const modal = document.getElementById('addTripModal');
            modal.classList.remove('hidden'); 
            modal.classList.add('flex');
</div>
        <div id="mobile-menu" class="mobile-menu fixed w-64 h-auto min-h-[50vh] bg-gray-900/95 backdrop-blur-xl z-50 p-5 shadow-2xl flex flex-col gap-6 rounded-br-2xl border-r border-b border-gray-700">
            <div class="flex justify-between items-center border-b border-gray-700 pb-4">
                <span class="text-        }

        window.toggleLoginModal = function() { 
            document.getElementById('loginModal').classList.toggle('hidden'); 
            document.getElementById('loginModal').classList.toggle('flex'); 
            document.getElementById('mobile-menu').classList.remove('open');
            document.getElementById('mobile-menu-overlay').classList.remove('active');
        }
        
        window.handleLogin = async function(e) { e.preventDefault(); try { await signInWithEmailAndPassword(auth, document.getElementById('emailInput').valuelg font-bold text-white">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</span>
                <button onclick="toggleMobileMenu()" class="text, document.getElementById('passInput').value); window.toggleLoginModal(); } catch (error) { showNotification("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø·Ø£", "error"); } }
        window.handleLogout = async function() { await signOut-gray-400 hover:text-white w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-800"><i class="fas fa-times"></i></button(auth); window.location.reload(); }

        function listenForTrips() { 
            onSnapshot(query(collection(db, tripsPath), orderBy("createdAt", "desc")), (snap) => { 
                tripsData = []; 
                snap.forEach(doc => tripsData.push({id: doc.>
            </div>
            <nav class="flex flex-col space-y-4 text-base font-id, ...doc.data()})); 
                renderTrips(tripsData); 
                isTrisemibold">
                <a href="#" class="text-gray-300 hover:text-teal-4psLoaded = true;
                checkAllLoaded(); 
            }); 
        }
        function listenForBanner() { 
            onSnapshot(query(collection(db, bannerPath), orderBy("createdAt", "desc00 flex items-center gap-3" onclick="toggleMobileMenu()"><i class="fas fa-home w-5 text-center"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="#trips-section" class="text-gray-300 hover:text-teal-400 flex items-center gap-3" onclick="toggleMobileMenu()"><i class="fas fa-plane w-5 text-center"></i> Ø§Ù„Ø±Ø­Ù„Ø§Øª</a>
                <a href="#" target="_blank" class="text-gray-300 hover:text-teal-400 flex items-center gap-3 fb-link" onclick="toggleMobileMenu()"><i class="fab fa-facebook w-5 text-center"></i> ÙÙŠØ³Ø¨ÙˆÙƒ</a>
            </nav>
            <div class="mt-2 border-t border-gray-700 pt-4">
                <button id="mobileLoginBtn" onclick="toggleLoginModal()" class="w-full text-gray-30")), (snap) => { 
                bannerData = []; 
                snap.forEach(doc => bannerData0 hover:text-white border border-gray-600/50 bg-gray-800/50 px-4 py-2.5 rounded-xl transition-all flex items-center gap-3.push({id: doc.id, ...doc.data()})); 
                renderBanner(bannerData); 
                isBannerLoaded = true;
                checkAllLoaded(); 
            }); 
        }

 mb-3"><i class="fas fa-lock w-5 text-center text-teal-500        window.confirmDelete = function(id, title, type) { pendingDelete = { id, title, type"></i> <span>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></button>
                <button id="mobileLogoutBtn" onclick=" }; document.getElementById('deleteModal').classList.remove('hidden'); document.getElementById('deleteModal').classList.add('flex'); }
        window.executeDelete = async function() { if(!pendingDelete) return; try {handleLogout()" class="hidden w-full text-red-400 hover:text-red-300 border border-red-900/30 bg-red-900/10 px- await deleteDoc(doc(db, pendingDelete.type==='trip'?tripsPath:bannerPath, pending4 py-2.5 rounded-xl transition-all flex items-center gap-3 mb-3"><iDelete.id)); showNotification("ØªÙ… Ø§Ù„Ø­Ø°Ù", "success"); } catch(e){showNotification("Ø®Ø·Ø£","error")} window.closeDeleteModal(); }
        window.closeDeleteModal = function() { document.getElementById class="fas fa-sign-out-alt w-5 text-center"></i> <span>Ø®Ø±ÙˆØ¬</span></button>
                <div id="mobileAdminActions" class="hidden grid-cols-2 gap-3">('deleteModal').classList.add('hidden'); document.getElementById('deleteModal').classList.remove('flex'); }
                    <button onclick="toggleBannerModal(); toggleMobileMenu();" class="flex flex-col items-center
        window.openBookingOptions = function(title, code, price, phone) { currentBookingTrip = { title, code, price, phone }; document.getElementById('bookingOptionsModal').classList.remove('hidden'); document.getElementById('bookingOptionsModal').classList.add('flex'); }
        window.closeBookingOptions = function() { justify-center bg-teal-900/20 border border-teal-500/30 text-teal-100 py-3 rounded-xl text-xs gap-2 hover:bg-teal-900/40"><i class="fas fa-images text-lg"></i> Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±</button document.getElementById('bookingOptionsModal').classList.add('hidden'); document.getElementById('bookingOptionsModal').classList.>
                    <!-- Add Trip Logic Fixed -->
                    <button onclick="openAddTripModal(); toggleMobileMenu();"remove('flex'); }
        window.handleInquiry = function() { window.open(`https://wa.me/${currentBookingTrip.phone}?text=${encodeURIComponent(`Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† ${currentBookingTrip.title} class="flex flex-col items-center justify-center bg-teal-900/20 border border-teal-500/30 text-teal-100 py-3 rounded-xl text- (${currentBookingTrip.code})`)}`); closeBookingOptions(); }
        window.openBookingForm = function() { closeBookingOptions(); document.getElementById('formTripTitle').value=currentBookingTrip.title; document.xs gap-2 hover:bg-teal-900/40"><i class="fas fa-plus text-lg"></i> Ø¥Ø¶Ø§ÙØ© Ø±Ø­Ù„Ø©</button>
                </div>
            </div>
        </div>

        <!-- HerogetElementById('formTripPrice').value=currentBookingTrip.price; document.getElementById('formCount').value=1; window.updateTotalPrice(); document.getElementById('bookingFormModal').classList.remove('hidden'); document.getElementById('bookingFormModal').classList.add('flex'); }
        window.closeBookingForm = function() { document. -->
        <header class="flex-grow flex flex-col items-center justify-center text-center pt-4 pb-6 overflow-hidden">
            <div class="w-full mb-4 relative">
                <div class="marquee-wrapper"><div id="marquee-track" class="marquee-content py-2getElementById('bookingFormModal').classList.add('hidden'); document.getElementById('bookingFormModal').classList.remove('flex'); }
        window.updateTotalPrice = function() { document.getElementById('formTotal').textContent = (parseInt"></div></div>
            </div>
            <div class="max-w-3xl px-4 relative z-10">
                <span class="inline-block py-1 px-3 rounded-full bg-teal(document.getElementById('formCount').value||1) * parseFloat(currentBookingTrip.price||0)).toLocaleString() + ' Ø¬.Ù…'; }
        window.finalizeBooking = function(e) { e.preventDefault();-500/20 border border-teal-500/50 text-teal-300 text-xs font-bold mb-4 animate-pulse">Ø±Ø­Ù„Ø§Øª Ù…Ù…ØªØ¹Ø©ØŒ Ø°ÙƒØ±ÙŠØ§Øª Ù„Ø§ ØªÙÙ†Ø³Ù‰</span>
                <h1 class="text-2xl md:text-3xl lg:text window.open(`https://wa.me/${currentBookingTrip.phone}?text=${encodeURIComponent(`Ø­Ø¬Ø²:-4xl font-black text-white mb-6 leading-tight">ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ØªØ¨Ø¯Ø£ <span class="text-transparent bg-clip-text bg-gradient-to-r from-teal-40 ${currentBookingTrip.title}\nØ§Ù„Ø§Ø³Ù…: ${document.getElementById('clientName').value}\nØ§Ù„Ø¹Ø¯Ø¯: ${document.getElementById('formCount').value}\nØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${document.getElementById('formTotal').textContent0 to-blue-500">Ù…Ù† Ù‡Ù†Ø§</span></h1>
                <p class="text-sm md:}`)}`); closeBookingForm(); }
        window.toggleTripStatus = async function(id, status) {text-base text-gray-300 mb-8 max-w-2xl mx-auto">Ù†Ø­Ù† Ù†Ø¶Ù…Ù† Ù„Ùƒ Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø© Ø³ÙØ± Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±. Ø§Ø³ØªÙƒØ´Ù Ù…Ø¬Ù…ÙˆØ¹Ø© Ø±Ø­Ù„Ø§ØªÙ†Ø§ Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠØ© await setDoc(doc(db, tripsPath, id), {status}, {merge:true}); }
        window.handleBannerSubmit = async function(e) { e.preventDefault(); const files = document.getElementById('bannerFiles').files; if(!files.length) return; document.getElementById('bannerSubmitBtn').innerHTML='...'; try { const urls = await Promise.all([...files].map(f=>uploadToCloudinary(f))); await Ø§Ù„Ø¢Ù†.</p>
                <a href="#trips-section" class="inline-block bg-teal- Promise.all(urls.map(url=>addDoc(collection(db, bannerPath), {url, createdAt600 hover:bg-teal-700 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:scale-105 active:scale-95 transition-all text-: Timestamp.now()}))); showNotification("ØªÙ…","success"); window.closeBannerModal(); } catch(e){sm md:text-base">ØªØµÙØ­ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</a>
            </div>
        </header>

showNotification("Ø®Ø·Ø£","error")} document.getElementById('bannerSubmitBtn').innerHTML='ØªØ£ÙƒÙŠØ¯'; }
        
        window.toggleBannerModal = function() { isAdmin? (document.getElementById('addBannerModal').classList        <!-- Video Section -->
        <section id="video-section" class="hidden w-full max-w-md mx-auto px-4 pb-12"><div id="video-container" class="w-.toggle('hidden'), document.getElementById('addBannerModal').classList.toggle('flex')) : null; }
        window.closeTripModal = function() { document.getElementById('addTripModal').classList.add('hidden');full"></div></section>

        <!-- Trips -->
        <section id="trips-section" class="py-10">
            <div class="container mx-auto px-6">
                <div class document.getElementById('addTripModal').classList.remove('flex'); }
        window.closeBannerModal = function() { document.getElementById('addBannerModal').classList.add('hidden'); document.getElementById('addBannerModal').="flex justify-between items-end mb-12">
                    <div><h2 class="text-2xl md:text-3xl font-bold text-white mb-2">Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>classList.remove('flex'); }
        
        window.toggleMobileMenu = function() { 
            const menu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay<div class="h-1 w-20 bg-teal-500 rounded"></div></div>
                </div>
                <div id="trips-container" class="grid grid-cols-1 md:grid-');
            if (menu.classList.contains('open')) {
                menu.classList.remove('open');
                overlay.classList.remove('active');
            } else {
                menu.classList.add('opencols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
            ');
                overlay.classList.add('active');
            }
        }
        
        window.addEventListener('scroll', () => {
            const menu = document.getElementById('mobile-menu');
            if (menu</div>
        </section>

        <!-- Footer -->
        <footer class="bg-black/90 text-gray-400 py-10 border-t border-gray-800">
            <.classList.contains('open')) {
                window.toggleMobileMenu();
            }
        });

        div class="container mx-auto px-6 text-center">
                <p class="mb-4 text-xl font-bold text-white" id="footerCompanyName">Wolf TraVal</p>
                <divwindow.shareTrip = async function(t,l) { try{await navigator.clipboard.writeText(location.origin+location.pathname+l); showNotification("Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·","success")}catch(e){} } class="flex justify-center gap-6">
                    <a href="#" target="_blank" class="text-3xl hover:text-green-500 transition-colors wa-link"><i class="fab fa-
        window.previewBannerImages = function(e) { document.getElementById('bannerPreview').innerHTML = [...e.target.files].map(f => `<${f.type.startsWith('video')?'video':'img'}whatsapp"></i></a>
                     <a href="#" target="_blank" class="text-3xl hover:text-blue-500 transition-colors fb-link"><i class="fab fa-facebook"></i></a>
                 src="${URL.createObjectURL(f)}" class="w-16 h-16 object-cover border border-gray-600 rounded">`).join(''); }
        window.toggleCustomInput = function(selectId</div>
                <p class="text-sm mt-6">Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù€ Wolf TraVal.</p>
            </div>
        </footer>
    </div>

    <!-- Modals (Login, customId) { const el = document.getElementById(customId); document.getElementById(selectId).value === 'other' ? (el.classList.remove('hidden'), el.required=true) : (el.classList.add('hidden'), el.required=false); }
        function updateUIForAdmin(l) { , Delete, Booking) -->
    <div id="loginModal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/80 backdrop-blur-sm p-4"><div class="bg-gray-800 border border-teal-500/50 w-
            const ml=document.getElementById('mobileLoginBtn'), mo=document.getElementById('mobileLogoutBtn'), mafull max-w-sm rounded-2xl shadow-2xl p-6"><h3 class="text-=document.getElementById('mobileAdminActions');
            if(l){ ml.classList.add('hidden'); mo.classList.remove('hidden'); ma.classList.remove('hidden'); ma.classList.add('grid'); }
            else { ml.classList.remove('hidden'); mo.classList.add('hidden'); ma.classList.xl font-bold text-center text-white mb-4">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3><form id="loginForm" onsubmit="handleLogin(event)" class="space-y-4"><input type="email" id="emailInput" required class="w-full bg-gray-700 border border-gray-60add('hidden'); ma.classList.remove('grid'); }
            renderTrips(tripsData); render0 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-teal-Banner(bannerData);
        }
        window.onload = initApp;
    </script>
</500 ltr" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"><input type="password" id="passInput"head>
<body class="bg-gray-900 min-h-screen relative text-gray-100 selection:bg-teal-500 selection:text-white">

    <!-- Loading Screen -->
    <div id="loader">
        <div class="text-center">
            <i class=" required class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-teal-500 ltr" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"><button type="submit" id="loginBtn" class="w-fullfas fa-plane-departure text-6xl text-teal-500 animate-bounce mb-4"></i>
            <h1 class="text-4xl font-black text-white tracking-widest">Wolf bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 rounded-lg transition-colors">Ø¯Ø®ÙˆÙ„</button><button type="button" onclick="toggleLoginModal()" TraVal</h1>
            <p class="text-gray-300 mt-2 text-sm animate-pulse">Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªØ·Ø¨ÙŠÙ‚...</p>
        </div>
    </div>

    <!-- Install Button -->
 class="w-full text-gray-500 text-sm hover:text-gray-300">Ø¥Ù„ØºØ§Ø¡</button></form></div></div>
    <div id="deleteModal" class="fixed    <button id="installBtn" class="hidden fixed bottom-6 left-6 z-[9999] bg-gradient-to-r from-teal-600 to-blue-600 text- inset-0 z-[200] hidden items-center justify-center bg-black/90 backdrop-blur-sm p-4"><div class="bg-gray-800 border border-red-50white px-5 py-3 rounded-2xl shadow-2xl font-bold animate-bounce flex items-center gap-3 border border-white/20 hover:scale-105 transition-transform">
        0/30 w-full max-w-sm rounded-2xl shadow-2xl p-6 text-center"><div class="w-16 h-16 bg-red-900/30<i class="fas fa-download text-xl"></i> ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    </button>
    <script>
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');
         rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-exclamation-triangle text-2xl text-red-500"></i></div><h3 class="text-window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.classList.remove('hidden');
        });
        installBtn.addEventListener('clickxl font-bold text-white mb-2">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù</h3><p id="deleteMessage" class="text-gray-400 text-sm mb-6">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ</p', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null;
                installBtn.classList.><div class="flex gap-3"><button id="confirmDeleteBtn" onclick="executeDelete()" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-boldadd('hidden');
            }
        });
        window.addEventListener('appinstalled', () => {
            installBtn.classList.add('hidden');
            deferredPrompt = null;
        });
    </script>

    <!-- Lightbox -->
    <div id="mainLightbox" class="lightbox">
        <div class py-2.5 rounded-xl transition-colors">Ù†Ø¹Ù…ØŒ Ø­Ø°Ù</button><button onclick="closeDeleteModal()" class="flex-1 bg-gray-700 hover:bg-gray-600 text-gray-200 font-bold py-2.5 rounded-xl transition-colors">Ø¥Ù„Øº="lightbox-close" onclick="closeLightbox()"><i class="fas fa-times"></i></div>
        <div id="lightboxContent"></div>
    </div>

    <!-- Background -->
    <div class="fixed inset-Ø§Ø¡</button></div></div></div>
    
    <!-- Compact Booking Form -->
    <div id="bookingOptionsModal" class="fixed inset-0 z-[200] hidden items-center justify-center bg-black0 z-0 h-[100dvh] w-full pointer-events-none">
        <img src="https://images.pexels.com/photos/2559941/pexels-photo/90 backdrop-blur-sm p-4"><div class="bg-gray-800 border border-gray-700 w-full max-w-xs rounded-2xl shadow-2xl p--2559941.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" class="w-full h-full object4 text-center"><h3 class="text-lg font-bold text-white mb-4">ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ</h3><div class="flex flex-col gap-3"><button onclick="handleInquiry()"-cover object-center">
        <div class="absolute inset-0 bg-black/70"></div> 
    </div>

    <div class="relative z-10 flex flex-col min-h-screen class="w-full bg-transparent border border-teal-500 text-teal-400 hover">

        <!-- Navbar (Modified for Unified Sidebar) -->
        <nav class="glass-nav sticky top-0 w-full flex items-center">
            <div class="w-full px-4 md:px-8 flex justify:bg-teal-500/10 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 text-sm"><i class="fab fa-whatsapp text-lg"></i>-between items-center h-full">
                <!-- Logo -->
                <button onclick="window.location.reload()" class="text-lg md:text-xl font-black text-white flex items-center gap-2 hover:text-teal-400">
                    <i class="fas fa-plane-departure text-teal-400"></i> <span id="companyName">Wolf TraVal</span>
                </button>

                <!-- Sidebar Button (Always Visible Now) -->
                <button onclick="toggleMobileMenu()" class="text-white text-lg p-2 hover:text-teal-400 transition-colors">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>

        <!-- Sidebar & Overlay -->
        <div id="mobile-menu-overlay" class="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>
        <div id="mobile-menu" class="mobile-menu fixed w-64 h-auto min-h-[50vh] bg-gray-900/95 backdrop-blur-xl z-50 p-5 shadow-2xl flex flex-col gap-6 Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ø³ØªÙØ³Ø§Ø±</button><button onclick="openBookingForm()" class="w-full bg-gradient rounded-br-2xl border-r border-b border-gray-700">
            <div class="flex justify-between items-center border-b border-gray-700 pb-4">
-to-r from-teal-600 to-blue-600 hover:from-teal-700 text-white font-bold py-2.5 rounded-xl shadow-lg flex items-center justify-center gap-2 text-sm"><i class="fas fa-check-circle text-lg"></i> Ø£Ø±ÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</button></div><button onclick="closeBookingOptions()" class="mt-4 text-gray-500 text-xs hover:text-gray-300">Ø¥ØºÙ„Ø§Ù‚</button></div></div>
    <div id="bookingFormModal" class="fixed inset-0 z-[200] hidden items-center justify-center bg-black/90 backdrop-blur-sm p-4"><div class="                <span class="text-lg font-bold text-white">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</span>
                <button onclick="toggleMobileMenu()" class="text-gray-400 hover:text-white w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-800"><i class="fas fa-times"></i></button>
            </div>
            <nav class="flex flex-col space-ybg-gray-800 border border-gray-700 w-full max-w-sm rounded-2xl shadow-2xl p-4"><div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-3"><h3 class="text-lg font-bold text-white">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬Ø²</h3><button onclick="closeBookingForm()" class="text-gray-400 hover:text-white"><i class="fas fa-times"></i></button></div><form onsubmit="finalizeBooking(event)" class="space-y-3"><div><label class="block text-gray-400 text-xs mb-1">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label><input type="text" id="clientName" required class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm"></div><div><label class="block text-gray-400 text-xs mb-1">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label><input type="tel"-4 text-base font-semibold">
                <a href="#" class="text-gray-300 hover:text-teal-400 flex items-center gap-3" onclick="toggleMobileMenu()"><i class="fas fa-home w-5 text-center"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="#tri id="clientPhone" required class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-right text-sm" placeholder="01xxxxxxxxx"></div><div><label class="block text-gray-400 text-xs mb-1">Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label><input type="text" id="formTripTitle" readonly class="w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-gray-400 text-sm"></div><div class="grid grid-cols-2ps-section" class="text-gray-300 hover:text-teal-400 flex items-center gap-3" onclick="toggleMobileMenu()"><i class="fas fa-plane w-5 text-center"></i> Ø§Ù„Ø±Ø­Ù„Ø§Øª</a>
                <a href="#" target="_blank" class="text-gray-3 gap-3"><div><label class="block text-gray-400 text-xs mb-1">Ø³Ø¹Ø± Ø§Ù„ÙØ±Ø¯</label><input type="text" id="formTripPrice" readonly class="w-full00 hover:text-teal-400 flex items-center gap-3 fb-link" onclick=" bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-gray-400 text-center text-sm"></div><div><label class="block text-gray-400 text-xs mb-1">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙØ±Ø§Ø¯</label><input type="number" id="toggleMobileMenu()"><i class="fab fa-facebook w-5 text-center"></i> ÙÙŠØ³Ø¨ÙˆÙƒ</a>
            </nav>
            <div class="mt-2 border-t border-gray-700formCount" min="1" value="1" oninput="updateTotalPrice()" required class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text pt-4">
                <button id="mobileLoginBtn" onclick="toggleLoginModal()" class="w-full text-gray-300 hover:text-white border border-gray-600/50 bg-gray-800/50 px-4 py-2.5 rounded-xl transition-all flex items-center gap-3 mb-3"><i class="fas fa-lock w-5 text-center text-teal-500"></i> <span>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></button>
                <button id="mobileLogoutBtn" onclick="handleLogout()" class="hidden w-full text-red-400 hover-white text-center text-sm"></div></div><div class="bg-teal-900/30 border border-teal-500/30 p-3 rounded-xl flex justify-between items-center mt-1"><span class="text-teal-400 font-bold text-sm">Ø¥Ø¬Ù…Ø§Ù„ÙŠ:text-red-300 border border-red-900/30 bg-red-900/10 px-4 py-2.5 rounded-xl transition-all flex items-center gap-3 mb-3"><i class="fas fa-sign-out-alt w-5 text-center"></i> <span>Ø®Ø±ÙˆØ¬</span></button>
                <div id="mobileAdminActions" class="hidden grid- Ø§Ù„Ø³Ø¹Ø±:</span><span id="formTotal" class="text-white font-black text-lg">0 Ø¬.Ù…</span></div><button type="submit" class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-2.5 rounded-xl shadow-cols-2 gap-3">
                    <button onclick="toggleBannerModal(); toggleMobileMenu();" class="flex flex-col items-center justify-center bg-teal-900/20 border border-teallg mt-3 text-sm">ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ <i class="fab fa-whatsapp mr-1"></i></button></form></div></div>

    <!-- Very Compact Add Trip Modal -->
    <div id="addTripModal" class="fixed inset-0 z-[100] hidden items-center-500/30 text-teal-100 py-3 rounded-xl text-xs gap-2 hover:bg-teal-900/40"><i class="fas fa-images text-lg"></i> Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±</button>
                    <!-- Changed to openAddTripModal to ensure clean state -->
                     justify-center bg-black/80 backdrop-blur-sm p-4 overflow-y-auto no-scrollbar">
        <div class="bg-gray-800 border border-gray-700 w<button onclick="openAddTripModal(); toggleMobileMenu();" class="flex flex-col items-center justify-center bg-teal-900/20 border border-teal-500/30 text-[95%] max-w-lg mx-auto rounded-2xl shadow-2xl overflow-hidden flex flex-col h-auto max-h-[90vh] my-6">
            <div class="-teal-100 py-3 rounded-xl text-xs gap-2 hover:bg-teal-900/40"><i class="fas fa-plus text-lg"></i> Ø¥Ø¶Ø§ÙØ© Ø±Ø­Ù„Ø©</button>
                </div>
            </div>
        </div>

        <!-- Hero -->
        <header class="flex-growmodal-header-fixed p-4 border-b border-gray-700 flex justify-between items-center bg-gray-800">
                <h3 id="modalTitle" class="text-lg font-bold text-white">Ø¥Ø¶Ø§ÙØ© Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
                <button onclick="closeTripModal()" class flex flex-col items-center justify-center text-center pt-4 pb-6 overflow-hidden">
            <div class="w-full mb-4 relative">
                <div class="marquee-wrapper"><div="text-gray-400 hover:text-white transition-colors"><i class="fas fa-times text-lg"></i></button>
            </div>
            <form id="addTripForm" onsubmit=" id="marquee-track" class="marquee-content py-2"></div></div>
            </div>
            <div class="max-w-3xl px-4 relative z-10">
                <span class="inline-block py-1 px-3 rounded-full bg-teal-500/20 border border-handleTripSubmit(event)" class="p-4 space-y-2 overflow-y-auto no-scrollbar flex-grow">
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <labelteal-500/50 text-teal-300 text-xs font-bold mb-4 animate-pulse">Ø±Ø­Ù„Ø§Øª Ù…Ù…ØªØ¹Ø©ØŒ Ø°ÙƒØ±ÙŠØ§Øª Ù„Ø§ ØªÙÙ†Ø³Ù‰</span>
                <h1 class="text-2xl md:text-3xl lg:text-4xl font-black text-white mb class="block text-[10px] font-medium text-gray-400 mb-1">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                        <input type="text" id="tripTitle" required class="w-full bg-gray-700 border border-gray-600 rounded-lg px-2 py-1.-6 leading-tight">ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ØªØ¨Ø¯Ø£ <span class="text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500">Ù…Ù†5 text-white text-xs" placeholder="Ø¯Ù‡Ø¨">
                    </div>
                    <div>
                        <label class="block text-[10px] font-medium text-gray-400 mb-1">Ø§Ù„Ù…ÙƒØ§Ù†</label>
                        <input type="text" id="tripLocation" required class="w-full bg-gray-7 Ù‡Ù†Ø§</span></h1>
                <p class="text-sm md:text-base text-gray-300 mb-8 max-w-2xl mx-auto">Ù†Ø­Ù† Ù†Ø¶Ù…Ù† Ù„Ùƒ Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø© Ø³ÙØ± Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±. Ø§Ø³ØªÙƒØ´Ù Ù…Ø¬Ù…ÙˆØ¹Ø© Ø±Ø­Ù„Ø§ØªÙ†Ø§ Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠØ© Ø§Ù„Ø¢Ù†.</p>
                <a href="#00 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-xs" placeholder="Ø³ÙŠÙ†Ø§Ø¡">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-[10px] fonttrips-section" class="inline-block bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:scale-105 active:scale-95 transition-all text-sm md:text-base">ØªØµÙØ­-medium text-gray-400 mb-1">Ø§Ù„Ø³Ø¹Ø±</label>
                        <input type="number" id="tripPrice" required class="w-full bg-gray-700 border border-gray Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</a>
            </div>
        </header>

        <!-- Video Section -->
        <section id="video-section" class="hidden w-full max-w-md mx-auto px-4 pb-12"><div id="video-container" class="w-full"></div></section>

        <!-- Trips-600 rounded-lg px-2 py-1.5 text-white text-xs" placeholder="3500">
                    </div>
                    <div>
                        <label class="block text-[10px] font-medium text-teal-400 mb-1">Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²</label>
                        < -->
        <section id="trips-section" class="py-10">
            <div class="container mx-auto px-6">
                <div class="flex justify-between items-end mb-input type="text" id="tripPhone" required class="w-full bg-gray-700 border border-teal-500/50 rounded-lg px-2 py-1.5 text-white text-xs ltr" placeholder="01xxxxxxxxx">
                    </div>
                </div>
                <div class12">
                    <div><h2 class="text-2xl md:text-3xl font-bold text-white mb-2">Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h2><div class="h-1 w-20 bg-teal-500 rounded"></div></div>
                </div>
                <div id="trips-="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-[10px] font-medium text-gray-400 mb-1">Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
                        <input type="datetime-local" id="departureDate" required class="w-full bg-gray-700container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-black/90 text-gray-400 py-10 border-t border-gray-800">
            <div class="container mx-auto px-6 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-xs ltr">
                    </div>
                    <div>
                        <label class="block text-[10px] font-medium text-gray-400 mb-1">Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯</label>
                        <input type text-center">
                <p class="mb-4 text-xl font-bold text-white" id="footerCompanyName">Wolf TraVal</p>
                <div class="flex justify-center gap-6">="number" id="availableSeats" required class="w-full bg-gray-700 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-xs" placeholder="20">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-
                    <a href="#" target="_blank" class="text-3xl hover:text-green-500 transition-colors wa-link"><i class="fab fa-whatsapp"></i></a>
                     <a href="#"2">
                    <div>
                        <label class="block text-[10px] font-medium text-gray-400 mb-1">Ø§Ù„Ù„ÙŠØ§Ù„ÙŠ</label>
                        <select id="nightsSelect" onchange target="_blank" class="text-3xl hover:text-blue-500 transition-colors fb-link"><i class="fab fa-facebook"></i></a>
                </div>
                <p class="text-sm mt-6">Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù€ Wolf TraVal.</p>
            ="toggleCustomInput('nightsSelect', 'nightsCustom')" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-</div>
        </footer>
    </div>

    <!-- Modals (Login, Delete, Booking) -->
    <div id="loginModal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/80 backdrop-blur-sm p-4"><div class="bg-gray-80xs"><option value="1">1 Ù„ÙŠÙ„Ø©</option><option value="3" selected>3 Ù„ÙŠØ§Ù„ÙŠ</option><option value="other">Ø£Ø®Ø±Ù‰</option></select>
                        <input type="number" id="nightsCustom" class="hidden w-full bg-gray-700 border border-gray-6000 border border-teal-500/50 w-full max-w-sm rounded-2xl rounded-lg px-2 py-1.5 text-white text-xs mt-1">
                    </div>
                    <div>
                        <label class="block text-[10px] font-medium text-gray-4 shadow-2xl p-6"><h3 class="text-xl font-bold text-center text-white mb-4">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3><form id="loginForm" onsubmit="handleLogin(event)" class="space-y-4"><input type="email" id="emailInput" required class="w-full00 mb-1">Ø§Ù„Ø£ÙŠØ§Ù…</label>
                        <select id="daysSelect" onchange="toggleCustomInput('daysSelect', 'daysCustom')" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-xs">< bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-teal-500 ltr" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"><input type="password" id="passInput" required class="w-full bg-gray-option value="1">1 ÙŠÙˆÙ…</option><option value="4" selected>4 Ø£ÙŠØ§Ù…</option><option value="other">Ø£Ø®Ø±Ù‰</option></select>
                        <input type="number" id="daysCustom" class="hidden w-full bg-gray-700 border border-gray-600 rounded-lg px700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-teal-500 ltr" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"><button type="submit" id="loginBtn" class="w-full bg-teal-600 hover:bg-2 py-1.5 text-white text-xs mt-1">
                    </div>
                </div>
                <div>
                    <label class="block text-[10px] font-medium text-gray-40-teal-700 text-white font-bold py-3 rounded-lg transition-colors">Ø¯Ø®ÙˆÙ„</button><button type="button" onclick="toggleLoginModal()" class="w-full text-gray-50 mb-1">Ø§Ù„ÙˆØµÙ</label>
                    <textarea id="tripDesc" required rows="2"00 text-sm hover:text-gray-300">Ø¥Ù„ØºØ§Ø¡</button></form></div></div>
    <div id="deleteModal" class="fixed inset-0 z-[200] hidden items-center justify-center bg-black/90 backdrop-blur-sm p-4"><div class=" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-xs" placeholder="ØªÙØ§ØµÙŠÙ„..."></textarea>
                </div>
                <div class="bg-gray-900 p-2 rounded-lg border border-gray-700">
                    <h4 class="text-white font-bold mb-1 text-xs"><i class="fas fa-images ml-1"></i> Ø§Ù„ÙˆØ³Ø§Ø¦Ø·</h4>
                    <input type="file" id="tripImageFile" multiple accept="image/*,video/*" class="w-full bg-gray-700 border border-gray-60bg-gray-800 border border-red-500/30 w-full max-w-sm rounded-2xl shadow-2xl p-6 text-center"><div class="w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-exclamation-triangle text-2xl text-red-500"></i></div><h3 class="text-xl font-bold text-white mb-2">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù</h3><p id="deleteMessage" class="text-gray-400 text0 rounded-lg px-2 py-1 text-white text-[10px] ltr">
                </div>
                <button type="submit" id="submitBtn" class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 rounded-lg shadow-lg transition-sm mb-6">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ</p><div class="flex gap-3"><button id="confirmDeleteBtn" onclick="executeDelete()" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-2.5 rounded-xl transition--colors mt-2 text-sm">Ø­ÙØ¸ ÙˆÙ†Ø´Ø±</button>
            </form>
        </div>
    </div>

    <!-- Add Banner Modal -->
    <div id="addBannerModal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-gray-800 border border-gray-colors">Ù†Ø¹Ù…ØŒ Ø­Ø°Ù</button><button onclick="closeDeleteModal()" class="flex-1 bg-gray-700 hover:bg-gray-600 text-gray-200 font-bold py-2.5 rounded-xl transition-colors">Ø¥Ù„ØºØ§Ø¡</button></div></div></div>
    
    <!-- Reduced Booking Form Size -->
    <div id="bookingOptionsModal" class="fixed inset-0 z700 w-full max-w-lg rounded-2xl shadow-2xl p-6">
            <div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-2"><h3 class="text-lg font-bold text-white">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ± Ø£Ùˆ ÙÙŠØ¯ÙŠÙˆ-[200] hidden items-center justify-center bg-black/90 backdrop-blur-sm p-4"><div class="bg-gray-800 border border-gray-700 w-full Ù„Ù„Ù…Ø¹Ø±Ø¶</h3><button onclick="closeBannerModal()" class="text-gray-400 hover:text-white"><i class="fas fa-times"></i></button></div>
            <form id="addBannerForm" onsubmit="handleBannerSubmit(event)" class="space-y-4"><div class="bg-gray max-w-xs rounded-2xl shadow-2xl p-4 text-center"><h3 class="text-lg font-bold text-white mb-4">ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ</h3><div class="-900 p-4 rounded-xl border border-gray-700"><label class="block text-sm text-gray-400 mb-2">Ø§Ø®ØªØ± ØµÙˆØ±Ø§Ù‹ Ø£Ùˆ ÙÙŠØ¯ÙŠÙˆ</label><input typeflex flex-col gap-3"><button onclick="handleInquiry()" class="w-full bg-transparent border border-teal-500 text-teal-400 hover:bg-teal-500/10 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 text="file" id="bannerFiles" multiple accept="image/*,video/*" onchange="previewBannerImages(event)" class="w-full text-sm text-gray-400 file:bg-teal-600 file:text-white hover:file:bg-teal-700"></div><div id="-sm"><i class="fab fa-whatsapp text-lg"></i> Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ø³ØªÙØ³Ø§Ø±</button><button onclick="openBookingForm()" class="w-full bg-gradient-to-r from-teal-600 to-blue-600 hover:from-teal-700 text-white font-boldbannerPreview" class="flex flex-wrap gap-2 max-h-40 overflow-y-auto custom-scroll"></div><button type="submit" id="bannerSubmitBtn" class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 rounded-lg shadow-lg">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ø´Ø±</button></form>
        </div>
    </div>

</body>
</html>